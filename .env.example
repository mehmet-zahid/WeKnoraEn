# Usage Instructions
# 1. Copy this file to .env
# 2. Replace all placeholders with actual values
# 3. Ensure the .env file is not committed to version control 

# ========== Image Version ==========
# WeKnora image version tag, optional values: latest(stable), main(latest development)
# WEKNORA_VERSION=latest

# gin mode
# Optional values: debug(development mode with detailed logs), release(production mode, disables Swagger docs)
GIN_MODE=release

# Disable new user registration (recommended to set to true in production)
DISABLE_REGISTRATION=false

# Ollama service base URL for connecting to Ollama service running on local/other servers
OLLAMA_BASE_URL=http://host.docker.internal:11434

# Storage Configuration
# Main database type (postgres/mysql)
DB_DRIVER=postgres

# Vector storage type (postgres/elasticsearch_v7/elasticsearch_v8/qdrant)
RETRIEVE_DRIVER=postgres

# File storage type (local/minio/cos)
STORAGE_TYPE=local

# Stream processing backend (memory/redis)
STREAM_MANAGER_TYPE=redis

# Application service port, default is 8080
APP_PORT=8080

# Frontend service port, default is 80
FRONTEND_PORT=80

# Document parsing module port, default is 50051
DOCREADER_PORT=50051

# Database username
DB_USER=postgres

# Database password
DB_PASSWORD=postgres123!@#

# Database name
DB_NAME=WeKnora

# If using redis as stream processing backend, configure the following parameters
# Redis password, leave empty if no password is set
REDIS_PASSWORD=redis123!@#

# Redis database index, default is 0
REDIS_DB=0

# Redis key prefix for namespace isolation
REDIS_PREFIX=stream:

# Base directory path for file storage when using local storage
LOCAL_STORAGE_BASE_DIR=/data/files

# Whether to automatically recover dirty data
AUTO_RECOVER_DIRTY=true

TENANT_AES_KEY=weknorarag-api-key-secret-secret

# Whether to enable knowledge graph construction and retrieval (construction phase requires calling large models, takes longer)
ENABLE_GRAPH_RAG=false


# Configure JWT_SECRET for frontend login token refresh
JWT_SECRET=weknora-jwt-secret

# MinIO port
# MINIO_PORT=9000

# MinIO console port
# MINIO_CONSOLE_PORT=9001

# Embedding concurrency, can be reduced when 429 errors occur
CONCURRENCY_POOL_SIZE=5

# If using ElasticSearch as vector storage, configure the following parameters
# ElasticSearch address, e.g. http://localhost:9200
# ELASTICSEARCH_ADDR=your_elasticsearch_addr

# ElasticSearch username, if authentication is required
# ELASTICSEARCH_USERNAME=your_elasticsearch_username

# ElasticSearch password, if authentication is required
# ELASTICSEARCH_PASSWORD=your_elasticsearch_password

# ElasticSearch index name for storing vector data
# ELASTICSEARCH_INDEX=WeKnora

# If using Qdrant as vector storage, configure the following parameters
# Qdrant service host address
# QDRANT_HOST=localhost

# Qdrant service port
# QDRANT_PORT=6334

# Qdrant collection name for storing vector data
# QDRANT_COLLECTION=weknora_embeddings

# Qdrant API key, if authentication is required (optional)
# QDRANT_API_KEY=your_qdrant_api_key

# Whether to enable TLS encrypted connection (optional, default is false)
# QDRANT_USE_TLS=false

# If using MinIO as file storage, configure the following parameters
# MinIO access key
# MINIO_ACCESS_KEY_ID=your_minio_access_key

# MinIO secret key
# MINIO_SECRET_ACCESS_KEY=your_minio_secret_key

# MinIO bucket name for storing files
# MINIO_BUCKET_NAME=your_minio_bucket_name

# If using Tencent Cloud COS as file storage, configure the following parameters
# Tencent Cloud COS access key ID
# COS_SECRET_ID=your_cos_secret_id

# Tencent Cloud COS secret key
# COS_SECRET_KEY=your_cos_secret_key

# Tencent Cloud COS region, e.g. ap-guangzhou
# COS_REGION=your_cos_region

# Tencent Cloud COS bucket name
# COS_BUCKET_NAME=your_cos_bucket_name

# Tencent Cloud COS application ID
# COS_APP_ID=your_cos_app_id

# Tencent Cloud COS path prefix for storing files
# COS_PATH_PREFIX=your_cos_path_prefix

# COS_ENABLE_OLD_DOMAIN=true means enable old domain format, default is true
COS_ENABLE_OLD_DOMAIN=true

# If parsing network connections using web proxy, configure the following parameters
# WEB_PROXY=your_web_proxy

# Neo4j switch
# NEO4J_ENABLE=false

# Neo4j access address
# NEO4J_URI=neo4j://neo4j:7687

# Neo4j username and password
# NEO4J_USERNAME=neo4j

# Neo4j password
# NEO4J_PASSWORD=password

# ========== File Upload Size Limit ==========
# Unified file size limit (MB), default is 50MB
# Affects: single file upload, gRPC message size, Nginx request body size
# MAX_FILE_SIZE_MB=50

# APK mirror source settings (optional)
APK_MIRROR_ARG=mirrors.tencent.com
